# 다룰 내용
- 쿼리 성능 측정 기초
- 개발 및 관리 도구 사용 주의, ANSI ISO표준
- WHERE 절과 JOIN 절 작성 순서, 스키마 이름 지정
- 날짜시간 상수 이해, char VS varchar 이해
- 조인 조건 VS 검색 조건, 임의 쿼리 식별자 달기
- 의미 오류는 잠재적인 성능 이슈


### 실행계획 - 인덱스 사용여부 판단, IO량 확인하기

**쿼리 성능 측정을 위한 방법/도구들**
1. SSMS, '실제 실행계획 포함' 기능(Ctrl+M)
	-  인덱스 사용 여부 판단용
2. 세션 옵션, SET STATISTICS IO
	- Table 단위 Page IO량 확인용
3. 그 외
	1. 세션옵션, SET STATISTICS TIME
	2. SQL Server 프로파일러 또는 Server 추적
	3. 확장 이벤트
	4. 추적 플래그
	5. DBCC 명령
	6. etc..


**1.인덱스(B-tree Index) 사용여부 판단**
 1. Index를 사용하는 경우
	 1. 클러스터형 인덱스 검색
	 2. Index Seek
 2. Index를 정상 사용 못하는 경우
	 1. 클러스터형 인덱스 Scan
	 2. 인덱스 스캔
	 3. 테이블 스캔

**2.IO 발생량 확인**
1. 'SET STATISTICS IO ON;' 구분 실행 후 쿼리 실행
2. 메세지 탭에 테이블 별 논리적 읽기 수 확인 가능
	1. 논리적 읽기 = 쿼리에서 읽은 Data 또는 Index에서 읽은 Page(8KB) 수
	2. IO량 = 논리적 읽기 수치 * 8KB


### 개발 및 관리 도구 사용 주의, ANSI ISO 표준
**개발 및 관리 도구 사용 주의**
1. SSMS Intellisense 
	1. DB나 Table 개체, 함수 기능 설명의 자동 리스트 기능
	2. 위치
		1. ssms 옵션 > 텍스트 편집기 >Transact-SQL > Intellisense 
	3. 사용주의
		1. 간헐적으로 다른 세션 차단 유발 가능
			1. 운영 서버 연결 시 사용 주의
				1. 개발, 테스트 장비 등 무관
2. SQL Server Profiler (혹은 추적 도구들) 
	1. SQL Server Profiler
		1. SQL 서버에서 제공되는 관리용 도구
		2. 서버에서 호출되는 쿼리, 기타 명령을 추척하여 내용을 확인할 수 있음.
	2. 사용주의
		1. 잘못 사용 시 서버에 큰 부하 유발
			1. 운영 서버 연결은 DB관리자만 허용
			2. 권한 권리를 통한 사용 제약 필요
3. 기타  3nd Party 도구 사용 시 부하 주의
	1. 여러 DBMS 운영 개발 등
	2. 잘못 사용 시 대용량 테이블 전체 읽기 발생

**ANSI ISO표준  사용하기**
1. 성능과 유지 관리 고려
	1. JOIN, ORDER BY , WITH ROLLUP 등 여러 DBMS만의 문법을 사용하거나 사라지는 구문들은 사용을 자제하자.
2. ANSI SQL 특징
	1. 표준 SQL문이라서 DBMS의 종류에 제약 받지 않는다.
	2. 특정 벤더에 종속하지 않다 다른 벤더의 DBMS로 교체가 빠르다.
	3. Table간의 JOIN 관계가 FROM에서 명시되기 때문에 WHERE문에서 조건만 확인하면 된다.(가독성이 좋다)
	4. 단 각 DBMS 내부 함수를 사용하는 경우 ANSI 문법만으로 쿼리 작성이 불가한 경우가 있다.
	5. 데이터를 가공시 DBMS의 내장 함수 등을 사용하기 때문에 자주 쓰이지 않는다.

- 참고
	- ANSI:미국 국립 표준 협회. 미국의 산업 표준을 제정하는 민간단체로 국제표준화기구 ISO에 가입되어 있다.


### WHERE절과 JOIN절 작성 순서, 스키마 이름 지정

**WHERE절 작성 순서는 성능과 관련 있다?**
교환법칙 더하기와 같음.
`어떤 순서로 작성하던지 Optimizer가 최적의 순서로 처리한다.`
```
	SELECT *
	FROM dbo.Orders AS o
	...
	WHERE o.ID = ?
		AND d.Name = ?
		AND o.Date = ?
```

**FROM절, JOIN절 작성 순서는 성능과 관련이 있다?**
결합법칙 곱하기와 같음.
`어떤 순서로 작성하던지 Optimizer가 최적의 순서로 처리한다.`
```
	SELECT *
	FROM dbo.A
	INNER JOIN dbo.B
		ON A.Col = B.Col
	INNER JOIN dbo.C
		ON C.col = B.Col
```
- OUTER JOIN은 


- 참고
	- Query Optimizer
		- RDB에서 DB 엔진에 있는 구성 요서 중에 쿼리에 옵티마이징 혹인 튜닝을 수행해 주는 구성요소.
		- 최적화 로직, 알고리즘이 포함되어 있음.