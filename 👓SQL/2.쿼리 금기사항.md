# 다룰내용
- index사용을 위해 쿼리 작성시필수 준수 조
- Search Argument란?
- Non-SARG 유형
- 조건절 상수화 이슈
- 테이블 변수 최적화 이슈
- 사례들

### SARG(Search Argument)란?
**고려사항**
- 이번 내용들은 아래 조건으로 달라질 수 있다
	- 인덱스의 유형(클러스터형 vs. 비클러스터형)
	- SQL Server 버전
	- SQL Server Edition
- 기본적으로 비클러스터형 인덱스를 기준으로 다룬다.


**SARG(Search Argument , 검색 인수)**
- 정의
	- Predicate(조건자, 조건식)에서 검색 대상 및 범위를 `제한할 수 있는 식`
	- 해당 열에 인덱스 사용 및 쿼리 최적화를 위한 필요 조건
	- Predicate  : WHERE절, HAVING절, JOIN조건처럼 bool값으로 사옹되는 것.
	- 기본적으로 최대한 서치 아규먼트를 만족하도록 검색 조건을 작성해야 한다.


### Index 사용 방해 요소 : Non-SARG 
**Non-SARG (비 검색 인수)**
- 인덱스 사용이나 쿼리 최적화에 방해 요소
- 불필요한 열/행 참조하거나 Index열에 부정형 사용 주의
- 검색을 제한하지 않는 식(테이블 다 뒤짐)

**Non-SARG 유형** + a
- 불필요한 데이터(열,행) 요청 (a)
	- 1)* 전체칼럼 참조는 지양
		- 대용량데이터(Large object) 열이 포함되어 있으면 메모리,네트워크,클라이언트 버퍼 등에서 과부하를 일으킬 수 있다.
	- 2)OrderID 열에 인덱스가 있다면 두 쿼리는 실행 계획, 실행 방식, 처리하는 데이터 양이 차이 나게 된
		- 
```
--1)
SELECT CategoryId, CategoryName FROM dbo.Categories
--vs.
SELECT * FROM dbo.Categories 

--2)
SELECT OrderID FROM dbo.Orders
--vs.
SELECT OrderID , OrderDate FROM dbo.Orders 
```
- 부정형 사용 주의
- 불필요한 열 값 변형
- 부적절한 LIKE 식
- 열 간 비교