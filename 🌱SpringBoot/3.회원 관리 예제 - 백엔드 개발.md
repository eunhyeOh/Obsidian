- 비즈니스 요구사항 정리
- 회원 도메인과 리포지토리 만들기
- 회원 리포지토리 테스트 케이스 작성
- 회원 서비스 개발
- 회원 서비스 테스트

### 1.비즈니스 요구사항 정리
- 데이터 : 회원ID, 이름
- 기능 : 회원 등록, 조회

**일반적인 웹 애플리케이션 계층 구조**
![[Pasted image 20231125234627.png]]
- 컨트롤러 : 웹 MVC의 컨트롤러 역할
- 서비스 : 도메인을 가지고 핵심 비즈니스 로직 구현. 
- 리포지토리 : 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리
- 도메인 : 비즈니스 도메인 객체, ex)회원, 주문, 쿠폰 등 주로 데이터 베이스에 저장,관리

**클래스 의존관계**
![[Pasted image 20231125235154.png]]
- 아직 데이터 저장소가 선정되지 않아 우선 인터페이스로 구현 클래스를 변경할 수 있도록 설계
- 데이터 저장소는 RDB, NoSQL 등 다양한 저장소를 고민중인 상황으로 가정
- 개발을 진행하기 위해서 초기 개발 단계에서는 구현체로 가벼은 메모리 기반의 데이터 저장소 사용

### 2.회원 도메인과 리포지토리 만들기
- 파일 생성
	- 도메인 : class, 클래스내에 변수설정, getter, setter설정
	- 리포지토리 : interface에 사용할 함수 설정, 구현체class에 interface에 설정한 함수의 실제 코드를 작성

### 3.회원 리포지토리 테스트 케이스 작성
개발한 기능을 실행해서 테스트 할 때 자바의 main 메서드를 통해 실행하거나, 웹 애플리케이션의 컨트롤러를 통해 해당 기능을 실행한다. 이 방법은 준비,실행이 오래 걸리고, 반복 실행하기 어렵고 여러 테스트를 한번에 실행하기 어려운 단점이 있다. 
자바는 JUnit이라는 프레임워크로 테스트를 실행해서 이 문제를 해결한다.

**회원 리포지토리 메모리 구현제 테스트**
- `src/test/java`하위 폴더에 생성한다.

### 4.회원 서비스 개발

**Service**
- repository와 domain을 활용해서 실제 비지니 로직을 작성
ex)회원가입, 전체회원조회
- 서비스 클래스는 비지니스에 가까운 용어를 써야한다.(비지니스에 의존적으로 )설계
- <> 리포지토리는 기계적, 개발스러운 용어를 선택(데이터 넣어,빼의 기능이니)

>*Optional*
> - 옵셔널을 감싸서 멤버를 담음.
> - 옵셔널의 여러 메서드를 사용할 수 있음
> ex)null체크 등
  - 변수를 활용할 일이 아니라면 옵셔널을 변수에 반환하지 않고 메소드로 사용하기.!


>**단축키**
 cnrl +  alt +  V  = 자동완성
 crtl + shift + Alt +  T =  리팩토링과 관련  
 crtl + alt+ M = 엑스트라 메소드(메소드 추출)
> crtl + B = 해당 함수 작성문으로 이동
> shift + F10 = 이전 실행했던 것을 재실
  
 
### 5.회원 서비스 테스트

- 테스트시에는 함수명을 한글로 변경해도 무방함.
- 빌드시 실제 코드에 포함되지 않기때문.

**테스트 편하게 하는 법!**
> 테스트할 클래스에서 crtl + shift + T 하면 테스트클래스 만들어주미;
> given(이런데이터가 주어졌을때)~ when(테스트할 로직)~ then(결과 검증부)문법 추천 (주석으로 그냉 쓰는 )
> 

**전체 테스트 실행시 주의할 점!**
테스트 메모리db는 값을 공유하기 때문에 어떤 테스트 유닛에서 값을 저장하면 그 값이 공유되어 어디선가 오류를 발생시키는 원인이 될 수 있다.
이를 방지하기 위해서 Repositpory 클리어를 해주어야한다.

**DI사용(같은 인스턴스를 쓰게 하자!)**
- Service내에서 Repository를 new해서 사용하고, 테스트 클래스내에서 또 Repository를 new해서 사용하고 있다. 이건 서로 다른 Repository 인스턴스를 사용하고 있다는 뜻.
- 참고 ) Repository 클래스내에서 static(인스턴스와 상관없이 클래스레벨)를 선언하여 사용하고 있다면 크게 문제되지는 않지만..만약 static이 아니라면 다른 DB를 사용할 수 있게 되어 버림!
- 위 문제 해결을 위해서 Service는 Repository를 주입받는 것이 좋다! 이것이 Depandency Injection.
	- Service에서 Repository의 construntor를 생
